/*! { "name": "vissense-plugin-percentage-time-test", "version": "0.3.0", "copyright": "(c) 2015 tbk" } */
!function(a,b){"use strict";b(a,a.VisSense,a.VisSense.Utils)}(this,function(a,b,c,d){"use strict";b.fn.onPercentageTimeTestPassed=function(a,b){var e=c.defaults(b,{percentageLimit:1,timeLimit:1e3,interval:100,strategy:d}),f=0,g=null,h=null,i=c.noop,j=this.monitor({strategy:e.strategy,visible:function(){h=h||j.visobj().monitor({strategy:[],update:function(){var b=h.state().percentage;if(b<e.percentageLimit)g=null;else{var d=c.now();g=g||d,f=d-g}f>=e.timeLimit?(i(),j.stop(),a()):i=c.defer(function(){h.update()},e.interval)}}),h.update()},hidden:function(){i()}});j.start()},b.fn.on50_1TestPassed=function(a,b){this.onPercentageTimeTestPassed(a,c.extend(b||{},{percentageLimit:.5,timeLimit:1e3,interval:100}))}});