/*! { "name": "vissense-plugin-percentage-time-test", "version": "0.1.4", "copyright": "(c) 2014 tbk" } */!function(a,b){"use strict";"function"==typeof define&&define.amd?b(a,require("vissense")):"object"==typeof exports?b(a,a.VisSense):b(a,a.VisSense)}(this,function(a,b){"use strict";b.fn.onPercentageTimeTestPassed=function(a,c){var d=b.Utils.defaults(c,{percentageLimit:1,timeLimit:1e3,debounce:30,interval:100}),e=0,f=null,g=null,h=null,i=this.monitor({strategy:new b.VisMon.Strategy.EventStrategy({debounce:d.debounce}),visible:function(){g=g||i.visobj().monitor({update:function(){var c=g.state().percentage;if(c<d.percentageLimit)f=null;else{var j=b.Utils.now();f=f||j,e=j-f}e>=d.timeLimit?(clearTimeout(h),i.stop(),a()):h=setTimeout(function(){g.update()},d.interval)}}),g.start()},hidden:function(){clearTimeout(h)}});i.start()},b.fn.on50_1TestPassed=function(a){this.onPercentageTimeTestPassed(a,{percentageLimit:.5,timeLimit:970,debounce:30,interval:100})}});