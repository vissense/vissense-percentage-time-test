/*! { "name": "vissense-plugin-percentage-time-test", "version": "0.2.0", "copyright": "(c) 2014 tbk" } */!function(a,b){"use strict";"function"==typeof define&&define.amd?b(a,require("vissense")):"object"==typeof exports?b(a,a.VisSense):b(a,a.VisSense)}(this,function(a,b){"use strict";b.fn.onPercentageTimeTestPassed=function(a,c){var d=b.Utils.defaults(c,{percentageLimit:1,timeLimit:1e3,interval:100,debounce:30,strategy:[]}),e=!b.Utils.isArray(d.strategy)||d.strategy.length>0?d.strategy:new b.VisMon.Strategy.EventStrategy({debounce:d.debounce}),f=0,g=null,h=null,i=null,j=this.monitor({strategy:e,visible:function(){h=h||j.visobj().monitor({update:function(){var c=h.state().percentage;if(c<d.percentageLimit)g=null;else{var e=b.Utils.now();g=g||e,f=e-g}f>=d.timeLimit?(clearTimeout(i),j.stop(),a()):i=setTimeout(function(){h.update()},d.interval)}}),h.start()},hidden:function(){clearTimeout(i)}});j.start()},b.fn.on50_1TestPassed=function(a){this.onPercentageTimeTestPassed(a,{percentageLimit:.5,timeLimit:970,debounce:30,interval:100})}});